<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de √Åudio</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #1a1a1a;
            color: white;
        }
        button {
            padding: 15px 30px;
            font-size: 18px;
            background: #ff6b35;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
        }
        button:hover {
            background: #ff8c5a;
        }
        .info {
            margin: 20px 0;
            padding: 10px;
            background: #333;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>Teste de √Åudio - Festival Berna</h1>
    
    <div class="info">
        <h3>Informa√ß√µes do √Åudio:</h3>
        <div id="audioInfo">Carregando...</div>
    </div>
    
    <audio id="testAudio" preload="auto">
        <source src="/audio/please.MP3" type="audio/mpeg">
        Seu navegador n√£o suporta o elemento de √°udio.
    </audio>
    
    <div>
        <button onclick="playAudio()">‚ñ∂Ô∏è Tocar √Åudio</button>
        <button onclick="pauseAudio()">‚è∏Ô∏è Pausar √Åudio</button>
        <button onclick="stopAudio()">‚èπÔ∏è Parar √Åudio</button>
        <button onclick="checkAudioInfo()">üîç Verificar Info</button>
    </div>
    
    <div class="info">
        <h3>Logs:</h3>
        <div id="logs"></div>
    </div>

    <script>
        const audio = document.getElementById('testAudio');
        const audioInfo = document.getElementById('audioInfo');
        const logs = document.getElementById('logs');
        
        function log(message) {
            console.log(message);
            logs.innerHTML += '<div>' + new Date().toLocaleTimeString() + ': ' + message + '</div>';
            logs.scrollTop = logs.scrollHeight;
        }
        
        function checkAudioInfo() {
            const info = {
                src: audio.src,
                readyState: audio.readyState,
                paused: audio.paused,
                currentTime: audio.currentTime,
                duration: audio.duration,
                volume: audio.volume,
                muted: audio.muted,
                networkState: audio.networkState
            };
            
            audioInfo.innerHTML = '<pre>' + JSON.stringify(info, null, 2) + '</pre>';
            log('Info do √°udio atualizada');
        }
        
        async function playAudio() {
            try {
                log('Tentando tocar √°udio...');
                audio.currentTime = 0;
                audio.volume = 1.0;
                audio.muted = false;
                
                const playPromise = audio.play();
                if (playPromise !== undefined) {
                    await playPromise;
                    log('‚úÖ √Åudio tocando com sucesso!');
                }
            } catch (error) {
                log('‚ùå Erro ao tocar √°udio: ' + error.name + ' - ' + error.message);
                
                if (error.name === 'NotAllowedError') {
                    log('üö´ Reprodu√ß√£o bloqueada pela pol√≠tica do navegador');
                }
            }
            checkAudioInfo();
        }
        
        function pauseAudio() {
            audio.pause();
            log('‚è∏Ô∏è √Åudio pausado');
            checkAudioInfo();
        }
        
        function stopAudio() {
            audio.pause();
            audio.currentTime = 0;
            log('‚èπÔ∏è √Åudio parado');
            checkAudioInfo();
        }
        
        // Event listeners
        audio.addEventListener('loadstart', () => log('üì• Carregamento iniciado'));
        audio.addEventListener('loadeddata', () => log('üìä Dados carregados'));
        audio.addEventListener('canplay', () => log('‚ñ∂Ô∏è Pode reproduzir'));
        audio.addEventListener('canplaythrough', () => log('üéµ Pode reproduzir completamente'));
        audio.addEventListener('play', () => log('‚ñ∂Ô∏è Reprodu√ß√£o iniciada'));
        audio.addEventListener('pause', () => log('‚è∏Ô∏è Reprodu√ß√£o pausada'));
        audio.addEventListener('ended', () => log('üèÅ Reprodu√ß√£o finalizada'));
        audio.addEventListener('error', (e) => log('‚ùå Erro no √°udio: ' + e.message));
        
        // Verificar info inicial
        setTimeout(checkAudioInfo, 1000);
    </script>
</body>
</html>